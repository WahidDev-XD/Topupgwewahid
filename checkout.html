<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Checkout QRIS</title>

<style>
:root{
  --accent:#6366f1;
  --bg:#020617;
  --card:#020617;
  --text:#e5e7eb;
  --green:#22c55e;
}

*{box-sizing:border-box}

body{
  margin:0;
  min-height:100vh;
  font-family:system-ui,Arial;
  background:radial-gradient(circle at top,#1e003a,#020617);
  color:var(--text);
  display:flex;
  justify-content:center;
  align-items:center;
}

.box{
  width:95%;
  max-width:420px;
  background:var(--card);
  border-radius:26px;
  padding:22px;
  box-shadow:0 0 32px rgba(99,102,241,.35);
  text-align:center;
}

/* TITLE */
h3{
  margin-top:0;
  font-size:18px;
  letter-spacing:.5px;
}

/* LOADING */
#loading{
  margin:30px 0;
}
.spinner{
  width:48px;
  height:48px;
  border:4px solid var(--accent);
  border-top:4px solid transparent;
  border-radius:50%;
  animation:spin 1s linear infinite;
  margin:0 auto 12px;
}
@keyframes spin{
  to{transform:rotate(360deg)}
}

/* QRIS */
#qrisBox{
  display:none;
}
#qrisBox img{
  width:240px;
  border-radius:18px;
  box-shadow:0 0 20px rgba(99,102,241,.45);
}

/* DETAIL */
#detail{
  margin-top:16px;
  font-size:13px;
  line-height:1.7;
  background:#020617;
  border-radius:16px;
  padding:14px;
}

/* TIMER */
#timer{
  margin-top:10px;
  font-size:13px;
  color:#facc15;
}

/* BUTTON */
button{
  width:100%;
  padding:14px;
  margin-top:16px;
  border:none;
  border-radius:18px;
  font-weight:900;
  cursor:pointer;
}
.wa{
  background:var(--green);
  color:#000;
}
</style>
</head>

<body>
<div class="box">

<h3>PEMBAYARAN QRIS</h3>

<!-- LOADING -->
<div id="loading">
  <div class="spinner"></div>
  Menyiapkan QRIS...
</div>

<!-- QRIS -->
<div id="qrisBox">
  <img src="qris.png">
  <p id="timer"></p>
</div>

<div id="detail"></div>

<button class="wa" id="waBtn">Konfirmasi via WhatsApp</button>

</div>

<script>
const p=new URLSearchParams(location.search);
const game=p.get("game");
const userid=p.get("userid");
const server=p.get("server");
const item=p.get("item");
const price=p.get("price");

/* DETAIL ORDER */
detail.innerHTML=`
<b>DETAIL PESANAN</b><br>
Game: ${game.toUpperCase()}<br>
User ID: ${userid}<br>
${game==="ml"?"Server ID: "+server+"<br>":""}
Item: ${item}<br>
Harga: Rp ${Number(price).toLocaleString("id-ID")}
`;

/* DELAY LOADING QRIS */
setTimeout(()=>{
  loading.style.display="none";
  qrisBox.style.display="block";
},2500); // ⏳ 2.5 detik

/* TIMER */
let t=300;
setInterval(()=>{
  t--;
  timer.textContent=`⏳ Menunggu pembayaran ${Math.floor(t/60)}:${String(t%60).padStart(2,"0")}`;
},1000);

/* WHATSAPP */
waBtn.onclick=()=>{
  const msg=`Halo Admin,
Saya sudah melakukan pembayaran.

Game: ${game.toUpperCase()}
User ID: ${userid}
${game==="ml"?"Server ID: "+server:""}
Item: ${item}
Harga: Rp ${Number(price).toLocaleString("id-ID")}`;

  window.open("https://wa.me/6282195594060?text="+encodeURIComponent(msg));
};
</script>
</body>
</html>
